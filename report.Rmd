---
title: "Final Project of Airbnb in Amsterdam"
author: "Xiaofan Xia"
date: "12/9/2019"
output:
  pdf_document: default
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidytext)
library(kableExtra)
library(factoextra)
library(FactoMineR)
df1 <- read.csv("listings.csv")
df1 <- df1[-5]
room2818 <- read.csv("room2818.csv")
room20168 <- read.csv("room20168.csv")
room760599 <- read.csv("room760599.csv")
```
# 1. Overview

## 1.1 Introduction

This project focuses on digging into the Airbnb dataset of Amsterdam. My main objective is to find out the relationship between reviewers’ comments and price regarding to different room type and neighborhood. Then, I want to generate a shiny app to show an Airbnb location map of Amsterdam. 

## 1.2 Motivation

I am planning on take a vacation to Europe next spring break these days. Amsterdam is on top of my visiting lists. I believe Airbnb Amsterdam dataset could give me some help both in finding great neighborhood to stay and also positive reviewed places to stay while my visiting. 

## 1.3 Dataset: Airbnb Amsterdam from Kaggle

source: https://www.kaggle.com/erikbruin/airbnb-amsterdam.

## 1.4 Research Questions

a. Is there any relationship between the price and the attitude of reviewers of an Airbnb? 

b. Is there any relationship between the price and the neighborhood of the Airbnb located?

c. Is there any difference in prices regarding different room types of Airbnb?

d. Is there any relationship between the price and the availability of an Airbnb?

e. Generate a shiny app to show locations of Amsterdam’s Airbnb places. 

# 2. Exploratory Data Analysis

In this project, I assume that prices of Airbnbs are in the same currency and the same unit. 

## 2.1 Basic Statistics 

```{r echo=FALSE,warning=FALSE,message=FALSE}
# availability 365
aval_max <- max(df1$availability_365) #365
aval_min <- min(df1$availability_365) #0
aval_mean <- mean(df1$availability_365) # 59.91
aval_median <- median(df1$availability_365) #3

# reviews per month
df1$reviews_per_month <- as.numeric(df1$reviews_per_month)
mreview_max <- max(df1$reviews_per_month,na.rm = TRUE) #11.85
mreview_min <- min(df1$reviews_per_month,na.rm = TRUE) #0.01
mreview_mean <- mean(df1$reviews_per_month,na.rm = TRUE) #1.06
mreview_median <- median(df1$reviews_per_month,na.rm = TRUE) #0.62

# number of reviews
df1$number_of_reviews <- as.numeric(df1$number_of_reviews)
treview_max <- max(df1$number_of_reviews,na.rm = TRUE) #695
treview_min <- min(df1$number_of_reviews,na.rm = TRUE) #00
treview_mean <- mean(df1$number_of_reviews,na.rm = TRUE) #21.56
treview_median <- median(df1$number_of_reviews,na.rm = TRUE) #8

# price
df1$price <- as.numeric(df1$price)
price_max <- max(df1$price) #8500
price_min <- min(df1$price) #0
price_mean <- mean(df1$price) #152.18
price_median <- median(df1$price) #125

# minimum of nights
df1$minimum_nights <- as.numeric(df1$minimum_nights)
night_max <- max(df1$minimum_nights) #1001
night_min <- min(df1$minimum_nights) #1
night_mean <- mean(df1$minimum_nights) #3.33
night_median <- median(df1$minimum_nights) #2

aval<- c(aval_max,aval_min,aval_mean,aval_median)
review_month <- c(mreview_max,mreview_min,mreview_mean,mreview_median)
review_total <- c(treview_max,treview_min,treview_mean,treview_median)
price <- c(price_max,price_min,price_mean,price_median)
min_night <- c(night_max,night_min,night_mean,night_median)

stat_df <- data.frame(aval,review_month,review_total,price,min_night)
names(stat_df) <- c("Availability in nights during a year","Number of reviews per month","Number of reviews in total","Price","Minimum nights of stay")
row.names(stat_df) <- c("Maximum","Minimum","Mean","Median")
kable(t(stat_df))

```

## 2.2. Graph Presentations

Here are the graph presentations of shared rooms. The first plot (Figure 1) illustrates the relationship between the number of reviews of each Airbnb in total and the prices. We can see that Airbnbs with lower prices tend to have more reviews. The second plot (Figure 2) shows that the relationship between the number of reviews per month and the prices of Airbnbs, which is basically consistent with the pattern in Figure 1. The price range of shared rooms is around 0 to 300 units.  

```{r echo=FALSE,warning=FALSE,message=FALSE}
share <- 
  df1 %>%
  filter(room_type=="Shared room")
ggplot(share)+geom_point(aes(price,number_of_reviews,color=neighbourhood))+ggtitle("Figure 1")+xlab("Price")+ylab("Number of reviews in total")+theme(legend.text = element_text(size=5))
ggplot(share)+geom_point(aes(price,reviews_per_month,color=neighbourhood))+ggtitle("Figure 2")+xlab("Price")+ylab("Number of reviews per month")+theme(legend.text = element_text(size=5))
```

Here are the graph presentations of private rooms. The pattern of the relationship between the number of reviews and the prices are similar to the pattern of share rooms. Figure 3 shows the number of reviews in total and Figure 4 shows the number of reviews per month. However, there are a lot more private rooms than shared rooms in Amsterdam, and the price range of private rooms is wider as well. Except one Airbnb's price is 5000 units per night, others' prices are in the range from 0 to 1000 units, and I also neglect the outlier (the room with price at 5000 units) in the plot. 

```{r echo=FALSE,warning=FALSE,message=FALSE}
private <- 
  df1 %>%
  filter(room_type=="Private room")
ggplot(private)+geom_point(aes(price,number_of_reviews,color=neighbourhood))+ggtitle("Figure 3")+xlab("Price")+ylab("Number of reviews in total")+xlim(0,1000)+theme(legend.text = element_text(size=5))
ggplot(private)+geom_point(aes(price,reviews_per_month,color=neighbourhood))+ggtitle("Figure 4")+xlab("Price")+ylab("Number of reviews per month")+xlim(0,1000)+theme(legend.text = element_text(size=5))
```

Here are the graph presentations of the entire home or apartments. The price range of entire apartments are much more wider than other room types, but the pattern of relationship between the number of reviews and the prices are very similar in all room types. 

```{r echo=FALSE,warning=FALSE,message=FALSE}
entire <- 
  df1 %>%
  filter(room_type=="Entire home/apt")
ggplot(entire)+geom_point(aes(price,number_of_reviews,color=neighbourhood))+ggtitle("Figure 5")+xlab("Price")+ylab("Number of reviews in total")+theme(legend.text = element_text(size=5))
ggplot(entire)+geom_point(aes(price,reviews_per_month,color=neighbourhood))+ggtitle("Figure 6")+xlab("Price")+ylab("Number of reviews per month")+theme(legend.text = element_text(size=5))
```







# 3. Principal Component Analysis

```{r echo=FALSE,warning=FALSE,message=FALSE}
#PCA(df1$price, scale.unit = TRUE, ncp = 5, graph = TRUE)



```

# 4. Text Analysis

First, I conduct a text analysis on three Airbnb places from each room type (shared room, entire home/apt, and private room). 
```{r echo=FALSE,message=FALSE,warning=FALSE}
# Private room
room2818 <- 
  df2 %>%
  filter(listing_id=="2818")
write.csv(room2818,file="room2818")

# Entire home/apt
room20168 <-
  df2 %>%
  filter(listing_id=="20168")
write.csv(room20168,file="room20168")

# Shared room
room760599 <-
  df2 %>%
  filter(listing_id=="760599")
write.csv(room760599,file="room760599")

```

# 4. Conclusion and Discussion


## 4.1. Results

## 4.2. Limitations and Concerns

# 5. Appendix

